-- accounts.directories definition

-- Drop table

-- DROP TABLE accounts.directories;

CREATE TABLE accounts.directories (
	sl_name varchar(50) NULL,
	directory varchar(50) NULL,
	regions bool NULL,
	sl_code varchar(50) NULL,
	order_description varchar(50) NULL,
	allow_extensions varchar NULL,
	CONSTRAINT directories_unique UNIQUE (sl_code, sl_name)
);


-- accounts.persons definition

-- Drop table

-- DROP TABLE accounts.persons;

CREATE TABLE accounts.persons (
	id int4 NULL,
	fullname varchar(50) NULL,
	job_title varchar(128) NULL,
	email varchar(50) NULL,
	phone varchar NULL,
	permissions int4 NULL
);


-- accounts.service definition

-- Drop table

-- DROP TABLE accounts.service;

CREATE TABLE accounts.service (
	id int4 NULL,
	sl_code varchar(50) NULL,
	sl_name varchar(50) NULL,
	sl_full_name varchar(64) NULL,
	CONSTRAINT service_unique UNIQUE (sl_code)
);


-- accounts.temp_users definition

-- Drop table

-- DROP TABLE accounts.temp_users;

CREATE TABLE accounts.temp_users (
	id serial4 NOT NULL,
	username varchar(255) NOT NULL,
	password_hash varchar(255) NOT NULL,
	"role" varchar NOT NULL,
	CONSTRAINT temp_users_pk PRIMARY KEY (id),
	CONSTRAINT temp_users_unique UNIQUE (username)
);


-- accounts.users definition

-- Drop table

-- DROP TABLE accounts.users;

CREATE TABLE accounts.users (
	id int4 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) NOT NULL,
	username varchar(255) NOT NULL,
	password_hash varchar(255) NOT NULL,
	created_at timestamp DEFAULT CURRENT_TIMESTAMP NULL,
	"role" varchar NULL,
	CONSTRAINT users_pkey PRIMARY KEY (id),
	CONSTRAINT users_username_key UNIQUE (username)
);


-- files_uploading.file_metadata definition

-- Drop table

-- DROP TABLE files_uploading.file_metadata;

CREATE TABLE files_uploading.file_metadata (
	id serial4 NOT NULL,
	filename varchar(255) NULL,
	upload_time timestamp DEFAULT CURRENT_TIMESTAMP NULL,
	status varchar(50) NULL,
	sent_at timestamp NULL,
	CONSTRAINT file_metadata_pkey PRIMARY KEY (id)
);


-- logs.loading_files definition

-- Drop table

-- DROP TABLE logs.loading_files;

CREATE TABLE logs.loading_files (
	date_create timestamp NOT NULL,
	creator varchar NOT NULL,
	id serial4 NOT NULL,
	"event" varchar NOT NULL
);


-- tablo_content.sp_action_24 definition

-- Drop table

-- DROP TABLE tablo_content.sp_action_24;

CREATE TABLE tablo_content.sp_action_24 (
	id int4 NOT NULL,
	code_param int4 NULL,
	code_sluzhba int4 NULL,
	"action" text NULL,
	CONSTRAINT sp_action_pkey_ PRIMARY KEY (id)
);


-- tablo_content.sp_sluzhba definition

-- Drop table

-- DROP TABLE tablo_content.sp_sluzhba;

CREATE TABLE tablo_content.sp_sluzhba (
	id serial4 NOT NULL,
	code int4 NOT NULL,
	naim text NULL,
	CONSTRAINT sp_sluzhba_pkey PRIMARY KEY (code)
);


-- tablo_content.sp_stormparam_24 definition

-- Drop table

-- DROP TABLE tablo_content.sp_stormparam_24;

CREATE TABLE tablo_content.sp_stormparam_24 (
	id int4 NOT NULL,
	code int4 NOT NULL,
	naim text NULL,
	order_num int4 NULL,
	type_critical int2 NULL,
	CONSTRAINT sp_stormparam_24_pkey PRIMARY KEY (code)
);


-- tablo_content.wk_action_check definition

-- Drop table

-- DROP TABLE tablo_content.wk_action_check;

CREATE TABLE tablo_content.wk_action_check (
	sl_code int4 NOT NULL,
	param_code int4 NOT NULL,
	region int4 NULL,
	places text NULL,
	action_date_begin timestamp NOT NULL,
	action_date_end timestamp NOT NULL,
	check_date timestamp NULL,
	status bool NOT NULL,
	id bigserial NOT NULL,
	check_person varchar(50) NULL,
	CONSTRAINT wk_action_check_pkey PRIMARY KEY (id)
);


-- accounts.head definition

-- Drop table

-- DROP TABLE accounts.head;

CREATE TABLE accounts.head (
	id int4 NULL,
	fullname varchar NOT NULL,
	post varchar NULL,
	sl_code varchar NULL,
	main bool NULL,
	CONSTRAINT head_service_fk FOREIGN KEY (sl_code) REFERENCES accounts.service(sl_code) ON UPDATE CASCADE
);